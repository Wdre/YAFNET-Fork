/*! Yet Another Forum.NET v4.0.0 | Â© Ingo Herbote | https://www.yetanotherforum.net/ */

(()=>{var __webpack_modules__={"./wwwroot/lib/bootbox.js":function(e,t,o){var r,n,a;!function(){"use strict";n=[o("bootstrap")],r=function e(t,o){const r={},n="6.0.4";r.VERSION=n;const a={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"}},i={dialog:'<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="bootbox-body"></div></div></div></div></div>',header:'<div class="modal-header"><h5 class="modal-title"></h5></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="bootbox-close-button close btn-close" aria-hidden="true" aria-label="Close"></button>',form:'<form class="bootbox-form"></form>',button:'<button type="button" class="btn"></button>',option:'<option value=""></option>',promptMessage:'<div class="bootbox-prompt-message"></div>',inputs:{text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-select"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'}},s={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",value:"",inputType:"text",errorMessage:null,swapButtonOrder:!1,centerVertical:!1,multiple:!1,scrollable:!1,reusable:!1,relatedTarget:null,size:null,id:null};function l(e,...t){if(!e)return{};for(const o of t)if(o)for(const[t,r]of Object.entries(o))switch(Object.prototype.toString.call(r)){case"[object Object]":e[t]=e[t]||{},e[t]=l(e[t],r);break;case"[object Array]":e[t]=l(new Array(r.length),r);break;default:e[t]=r}return e}function c(e,t){const o=e.length;let r={};if(o<1||o>2)throw new Error("Invalid argument length");return 2===o||"string"==typeof e[0]?(r[t[0]]=e[0],r[t[1]]=e[1]):r=e[0],r}function u(e,t,o){return l({},e,c(t,o))}function d(e,t,o,r){let n;if(r&&r[0]){n=r[0].locale||s.locale;(r[0].swapButtonOrder||s.swapButtonOrder)&&(t=t.reverse())}return p(u({className:`bootbox-${e}`,buttons:b(t,n)},r,o),t)}function p(e,t){const r={};for(const[e,o]of Object.entries(t))r[o]=!0;for(const[n,a]of Object.entries(e.buttons))if(r[n]===o)throw new Error(`button key "${n}" is not allowed (options are ${t.join(" ")})`);return e}function b(e,t){const o={};for(let r=0,n=e.length;r<n;r++){const n=e[r],a=n.toLowerCase(),i=n.toUpperCase();o[a]={label:m(i,t)}}return o}function m(e,t){const o=a[t];return o?o[e]:a.en[e]}function f(e){let t,o;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error('"message" option must not be null or an empty string.');(e=Object.assign({},s,e)).backdrop?e.backdrop="string"!=typeof e.backdrop||"static"!==e.backdrop.toLowerCase()||"static":e.backdrop=!1!==e.backdrop&&0!==e.backdrop&&"static",e.buttons||(e.buttons={}),t=e.buttons,o=h(t);var r=0;for(var[n,a]of Object.entries(t)){if("function"==typeof a&&(a=t[n]={callback:a}),"object"!==Object.prototype.toString.call(a).replace(/^\[object (.+)\]$/,"$1").toLowerCase())throw new Error(`button with key "${n}" must be an object`);if(a.label||(a.label=n),!a.className){let t=!1;t=e.swapButtonOrder?0===r:r===o-1,a.className=o<=2&&t?"btn-primary":"btn-secondary btn-default"}r++}return e}function h(e){return Object.keys(e).length}function g(e){_(e.data.dialog.querySelector(".bootbox-accept").first(),"focus")}function v(e,t,o){e.stopPropagation(),e.preventDefault();!("function"==typeof o&&!1===o.call(t,e))&&t&&bootstrap.Modal.getInstance(t).hide()}function w(e,t,r){let n=!1,a=!0,i=!0;if("date"===e)t===o||(a=y(t))?r===o||(i=y(r))||console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.'):console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.');else if("time"===e){if(t!==o&&!(a=k(t)))throw new Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');if(r!==o&&!(i=k(r)))throw new Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}else{if(t!==o&&isNaN(t))throw a=!1,new Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.');if(r!==o&&isNaN(r))throw i=!1,new Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}if(a&&i){if(r<t)throw new Error('"max" must be greater than or equal to "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');n=!0}return n}function k(e){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(e)}function y(e){return/(\d{4})-(\d{2})-(\d{2})/.test(e)}function _(e,t){if("string"==typeof t&&"function"==typeof e[t])e[t]();else{const o="string"==typeof t?new Event(t,{bubbles:!0}):t;e.dispatchEvent(o)}}function x(e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.children[0]}function E(e,t,o,r){if(r){const n=e=>{if(!e.target)return;const t=e.target.closest(r);t&&o.call(t,e)};return e.addEventListener(t,n),n}{const r=t=>{o.call(e,t)};return e.addEventListener(t,r),r}}return r.locales=function(e){return e?a[e]:a},r.addLocale=function(e,t){return["OK","CANCEL","CONFIRM"].forEach(((e,o)=>{if(!t[e])throw new Error(`Please supply a translation for "${e}"`)})),a[e]={OK:t.OK,CANCEL:t.CANCEL,CONFIRM:t.CONFIRM},r},r.removeLocale=function(e){if("en"===e)throw new Error('"en" is used as the default and fallback locale and cannot be removed.');return delete a[e],r},r.setLocale=function(e){return r.setDefaults("locale",e)},r.setDefaults=function(){let e={};return 2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],Object.assign(s,e),r},r.hideAll=function(){return document.querySelectorAll(".bootbox").forEach((e=>{bootstrap.Modal.getInstance(e).hide()})),r},r.init=function(o){return e(o||t)},r.dialog=function(e){if(bootstrap.Modal===o)throw new Error('"bootstrap.Modal" is not defined; please double check you have included the Bootstrap JavaScript library. See https://getbootstrap.com/docs/5.3/getting-started/introduction/ for more details.');if(e=f(e),bootstrap.Modal.VERSION){e.fullBootstrapVersion=bootstrap.Modal.VERSION;let t=e.fullBootstrapVersion.indexOf(".");e.bootstrap=e.fullBootstrapVersion.substring(0,t)}else e.bootstrap="2",e.fullBootstrapVersion="2.3.2",console.warn("Bootbox will *mostly* work with Bootstrap 2, but we do not officially support it. Please upgrade, if possible.");let t=x(i.dialog),r=t.querySelector(".modal-dialog"),n=t.querySelector(".modal-body"),a=x(i.header),s=x(i.footer),l=e.buttons,c={onEscape:e.onEscape};if("string"==typeof e.message?n.querySelector(".bootbox-body").innerHTML=e.message:n.querySelector(".bootbox-body").append(e.message),h(e.buttons)>0){for(const[e,t]of Object.entries(l)){let o=x(i.button);switch(o.dataset.bbHandler=e,t.className.split(" ").forEach((e=>{o.classList.add(e)})),e){case"ok":case"confirm":o.classList.add("bootbox-accept");break;case"cancel":o.classList.add("bootbox-cancel")}o.innerHTML=t.label,t.id&&o.setAttribute({id:t.id}),!0===t.disabled&&(o.disabled=!0),s.append(o),c[e]=t.callback}n.after(s)}if(!0===e.animate&&t.classList.add("fade"),e.className&&e.className.split(" ").forEach((e=>{t.classList.add(e)})),e.id&&t.setAttribute({id:e.id}),e.size)switch(e.fullBootstrapVersion.substring(0,3)<"3.1"&&console.warn(`"size" requires Bootstrap 3.1.0 or higher. You appear to be using ${e.fullBootstrapVersion}. Please upgrade to use this option.`),e.size){case"small":case"sm":r.classList.add("modal-sm");break;case"large":case"lg":r.classList.add("modal-lg");break;case"extra-large":case"xl":r.classList.add("modal-xl"),e.fullBootstrapVersion.substring(0,3)<"4.2"&&console.warn(`Using size "xl"/"extra-large" requires Bootstrap 4.2.0 or higher. You appear to be using ${e.fullBootstrapVersion}. Please upgrade to use this option.`)}if(e.scrollable&&(r.classList.add("modal-dialog-scrollable"),e.fullBootstrapVersion.substring(0,3)<"4.3"&&console.warn(`Using "scrollable" requires Bootstrap 4.3.0 or higher. You appear to be using ${e.fullBootstrapVersion}. Please upgrade to use this option.`)),e.title||e.closeButton){if(e.title?a.querySelector(".modal-title").innerHTML=e.title:a.classList.add("border-0"),e.closeButton){let t=x(i.closeButton);e.bootstrap<5&&(t.innerHTML="&#215;"),e.bootstrap<4?a.prepend(t):a.append(t)}n.before(a)}if(e.centerVertical&&(r.classList.add("modal-dialog-centered"),e.fullBootstrapVersion<"4.0.0"&&console.warn(`"centerVertical" requires Bootstrap 4.0.0-beta.3 or higher. You appear to be using ${e.fullBootstrapVersion}. Please upgrade to use this option.`)),e.reusable||(t.addEventListener("hide.bs.modal",(function(){t.removeEventListener("escape.close.bb",null),t.removeEventListener("click",null)}),{once:!0}),t.addEventListener("hidden.bs.modal",(function(){t.remove(),t=null}),{once:!0})),e.onHide){if("function"!=typeof e.onHide)throw new Error('Argument supplied to "onHide" must be a function');t.addEventListener("hide.bs.modal",e.onHide)}if(e.onHidden){if("function"!=typeof e.onHidden)throw new Error('Argument supplied to "onHidden" must be a function');t.addEventListener("hidden.bs.modal",e.onHidden)}if(e.onShow){if("function"!=typeof e.onShow)throw new Error('Argument supplied to "onShow" must be a function');E(t,"show.bs.modal",e.onShow)}if(t.addEventListener("shown.bs.modal",{dialog:t},g),e.onShown){if("function"!=typeof e.onShown)throw new Error('Argument supplied to "onShown" must be a function');E(t,"shown.bs.modal",e.onShown)}if(!0===e.backdrop){let e=!1;E(t,"mousedown",(function(t){t.stopPropagation(),e=!0})),E(t,"click.dismiss.bs.modal",(function(o){e||o.target!==o.currentTarget||_(t,"escape.close.bb")}))}t.addEventListener("escape.close.bb",(function(e){c.onEscape&&v(e,t,c.onEscape)})),t.addEventListener("click",(e=>{if("button"===e.target.nodeName.toLowerCase()&&!e.target.classList.contains("disabled")){const r=e.target.dataset.bbHandler;r!==o&&v(e,t,c[r])}})),document.addEventListener("click",(e=>{e.target.closest(".bootbox-close-button")&&v(e,t,c.onEscape)})),t.addEventListener("keyup",(function(e){27===e.which&&_(t,"escape.close.bb")})),"object"==typeof e.container?e.container.append(t):document.querySelector(e.container).append(t);const u=new bootstrap.Modal(t,{backdrop:e.backdrop,keyboard:!1,show:!1});return e.show&&u.show(e.relatedTarget),t},r.alert=function(){let e;if(e=d("alert",["ok"],["message","callback"],arguments),e.callback&&"function"!=typeof e.callback)throw new Error('alert requires the "callback" property to be a function when provided');return e.buttons.ok.callback=e.onEscape=function(){return"function"!=typeof e.callback||e.callback.call(this)},r.dialog(e)},r.confirm=function(){let e;if(e=d("confirm",["cancel","confirm"],["message","callback"],arguments),"function"!=typeof e.callback)throw new Error("confirm requires a callback");return e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},r.dialog(e)},r.prompt=function(){let e,t,n,a,l,c;if(n=x(i.form),e=d("prompt",["cancel","confirm"],["title","callback"],arguments),e.value||(e.value=s.value),e.inputType||(e.inputType=s.inputType),l=e.show===o?s.show:e.show,e.show=!1,e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)},e.buttons.confirm.callback=function(){let t;if("checkbox"===e.inputType){const o=Array.from(a.querySelectorAll('input[type="checkbox"]:checked'));if(t=Array.from(o).map((function(e){return e.value})),!0===e.required&&0===o.length)return!1}else t="radio"===e.inputType?a.querySelector('input[type="radio"]:checked').value:a.value;return e.callback.call(this,t)},!e.title)throw new Error("prompt requires a title");if("function"!=typeof e.callback)throw new Error("prompt requires a callback");if(!i.inputs[e.inputType])throw new Error("Invalid prompt type");switch(a=x(i.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"password":a.value=e.value,e.placeholder&&a.setAttribute("placeholder",e.placeholder),e.pattern&&a.setAttribute("pattern",e.pattern),e.maxlength&&a.setAttribute("maxlength",e.maxlength),e.required&&(a.required=!0),e.rows&&!isNaN(parseInt(e.rows))&&"textarea"===e.inputType&&a.setAttribute("rows",e.rows);break;case"date":case"time":case"number":case"range":if(a.value=e.value,e.placeholder&&a.setAttribute("placeholder",e.placeholder),e.pattern?a.setAttribute("pattern",e.pattern):"date"===e.inputType?a.setAttribute("pattern","d{4}-d{2}-d{2}"):"time"===e.inputType&&a.setAttribute("pattern","d{2}:d{2}"),e.required&&(a.required=!0),e.step){if(!("any"===e.step||!isNaN(e.step)&&parseFloat(e.step)>0))throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');a.setAttribute("step",e.step)}w(e.inputType,e.min,e.max)&&(e.min!==o&&a.setAttribute("min",e.min),e.max!==o&&a.setAttribute("max",e.max));break;case"select":var u={};if(c=e.inputOptions||[],!Array.isArray(c))throw new Error("Please pass an array of input options");if(!c.length)throw new Error('prompt with "inputType" set to "select" requires at least one option');e.required&&(a.required=!0),e.multiple&&(a.multiple=!0);for(const[,e]of Object.entries(c)){let t=a;if(e.value===o||e.text===o)throw new Error('each option needs a "value" property and a "text" property');if(e.group){if(!u[e.group]){var p=x("<optgroup />");p.setAttribute("label",e.group),u[e.group]=p}t=u[e.group]}let r=x(i.option);r.setAttribute("value",e.value),r.textContent=e.text,t.append(r)}for(const[e,t]of Object.entries(u))a.append(t);a.value=e.value,e.bootstrap<5&&(a.classList.remove("form-select"),a.classList.add("form-control"));break;case"checkbox":var b=Array.isArray(e.value)?e.value:[e.value];if(c=e.inputOptions||[],!c.length)throw new Error('prompt with "inputType" set to "checkbox" requires at least one option');a=x('<div class="bootbox-checkbox-list"></div>');for(const[t,r]of Object.entries(c)){if(r.value===o||r.text===o)throw new Error('each option needs a "value" property and a "text" property');let t=x(i.inputs[e.inputType]);t.querySelector("input").setAttribute("value",r.value),t.querySelector("label").append(`\n${r.text}`);for(const[e,o]of Object.entries(b))o===r.value&&(t.querySelector("input").checked=!0);a.append(t)}break;case"radio":if(e.value!==o&&Array.isArray(e.value))throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');if(c=e.inputOptions||[],!c.length)throw new Error('prompt with "inputType" set to "radio" requires at least one option');a=x('<div class="bootbox-radiobutton-list"></div>');var m=!0;for(const[t,r]of Object.entries(c)){if(r.value===o||r.text===o)throw new Error('each option needs a "value" property and a "text" property');let t=x(i.inputs[e.inputType]);t.querySelector("input").setAttribute("value",r.value),t.querySelector("label").append(`\n${r.text}`),e.value!==o&&r.value===e.value&&(t.querySelector("input").checked=!0,m=!1),a.append(t)}m&&a.querySelector('input[type="radio"]').setAttribute("checked",!0)}if(n.append(a),n.addEventListener("submit",(function(e){e.preventDefault(),e.stopPropagation(),t.querySelector(".bootbox-accept").click()})),e.message&&""!==e.message.trim()){let t=x(i.promptMessage).innerHTML=e.message;n.prepend(t),e.message=n}else e.message=n;t=r.dialog(e),t.removeEventListener("shown.bs.modal",g),t.addEventListener("shown.bs.modal",(function(){a.focus()}));const f=new bootstrap.Modal(t);return!0===l&&f.show(),t},r},void 0===(a="function"==typeof r?r.apply(t,n):r)||(e.exports=a)}()},"./wwwroot/lib/editor/autoCloseTags.ts":(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});class r{constructor(e){this.textarea=e,this.autoClosingTags=["b","i","u","h","code","img","quote","left","center","right","indent","list","color","size","albumimg","attach","youtube","vimeo","instagram","twitter","facebook","googlewidget","spoiler","userlink","googlemaps","hide","group-hide","hide-thanks","hide-reply-thanks","hide-reply","hide-posts","dailymotion","audio","media"],this.enableAutoCloseTags()}enableAutoCloseTags(){this.textarea.addEventListener("keydown",(e=>{if("]"===e.key){const e=this.textarea.selectionStart,t=this.textarea.value.substring(0,e),o=this.textarea.value.substring(this.textarea.selectionEnd);let r;try{r=t.match(/\[([^\]]+)$/)[1].match(/^([a-z1-6]+)/)[1]}catch(e){return}if(!r||!this.autoClosingTags.includes(r))return;const n=`[/${r}]`;this.textarea.value=t+n+o,this.textarea.selectionStart=this.textarea.selectionEnd=e,this.textarea.focus()}}))}}},"./wwwroot/lib/editor/mentions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function Mentions(opts={}){var _a;opts=Object.assign({lookup:"lookup",id:"",selector:"",element:null,symbol:"@",items:[],item_template:'<a class="dropdown-item" href="#"><img src="${item.avatar}" alt="avatar" class="me-2 img-thumbnail" style="max-width:20px;max-height:20px" /> ${item.name}</a>',onclick:void 0,url:""},opts);const $e=opts.id&&document.getElementById(opts.id)||opts.selector&&document.querySelector(opts.selector)||opts.element;if(!$e)return console.error("Invalid element selector",opts);const $lookup=document.createElement("div");$lookup.classList.value=`fixed-top autohide ${opts.lookup}`,null===(_a=$e.parentNode)||void 0===_a||_a.insertBefore($lookup,$e.nextSibling),$e.addEventListener("keydown",processKey),$e.addEventListener("keyup",showLookup),$e.addEventListener("click",hideLookup);let start=0,end=0,prevWord="";function showLookup(event){var _a,_b;if("Escape"===event.code)return hideLookup();const sel=window.getSelection(),$parent=null===(_a=$lookup.parentNode)||void 0===_a?void 0:_a.querySelector("textarea");if(!(null==sel?void 0:sel.anchorNode)||!$parent)return;const text=$parent.value||"",curr=$parent.selectionStart,getLength=e=>Array.isArray(e)&&e.length>0?e[0].length:0;start=curr-getLength(text.slice(0,curr).match(/[\S]+$/g)),end=curr+getLength(text.slice(curr).match(/^[\S]+/g));const word=text.substring(start,end);if(!word||word[0]!==opts.symbol)return prevWord="",hideLookup();if(word===prevWord)return;prevWord=word;const rect=$parent.getBoundingClientRect();$lookup.style.left=`${rect.left+20}px`,$lookup.style.top=`${rect.top+30}px`;const query=word.slice(1);if(query.length>=3&&opts.url){const e=null===(_b=document.querySelector('input[name="__RequestVerificationToken"]'))||void 0===_b?void 0:_b.value;fetch(opts.url.replace("{q}",encodeURIComponent(query)),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8",RequestVerificationToken:e}}).then((e=>e.json())).then((e=>opts.items=e))}const items=(opts.items||[]).filter((e=>e.name.toLowerCase().includes(query.toLowerCase()))).map((item=>eval('`<li class="mention-li-nt ${opts.lookup}" data-name="${item.name}" data-id="${item.id}">'+opts.item_template+"</li>`")));if(!items.length)return hideLookup();$lookup.innerHTML=`<ul class="dropdown-menu show">${items.join("")}</ul>`,[...$lookup.firstElementChild.children].forEach((e=>{e.addEventListener("click",onClick),e.addEventListener("mouseenter",onHover)})),$lookup.firstElementChild.children[0].classList.add("active"),$lookup.hasAttribute("hidden")&&$lookup.removeAttribute("hidden");const bounding=$lookup.getBoundingClientRect();(bounding.bottom>window.innerHeight||bounding.right>window.innerWidth)&&($lookup.style.top=parseInt($lookup.style.top)-10-$lookup.clientHeight+"px")}function hideLookup(){$lookup.hasAttribute("hidden")||$lookup.setAttribute("hidden","true")}function onClick(e){var t,o;const r=e.target.closest(".mention-li-nt");if(!r)return;null===(t=opts.onclick)||void 0===t||t.call(opts,r.dataset);const n=null===(o=$lookup.parentNode)||void 0===o?void 0:o.querySelector("textarea");n.value=n.value.replace(n.value.substring(start+1,end),""),hideLookup()}function onHover(e){const t=e.target.closest(".mention-li-nt");t&&!t.classList.contains("active")&&([...$lookup.firstElementChild.children].forEach((e=>e.classList.remove("active"))),t.classList.add("active"))}function processKey(e){const t=e.key;if(!["ArrowUp","ArrowDown","Enter"].includes(t)||$lookup.hasAttribute("hidden"))return;if(e.preventDefault(),"Enter"===t){const e=$lookup.querySelector(".active");return void(null==e||e.click())}const o=[...$lookup.firstElementChild.children],r=o.findIndex((e=>e.classList.contains("active")));o[r].classList.remove("active");const n=o[(r+("ArrowUp"===t?-1:1)+o.length)%o.length];n.classList.add("active"),n.scrollIntoView({block:"nearest"})}}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>Mentions})},bootstrap:e=>{"use strict";e.exports=bootstrap}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__);var e=__webpack_require__("./wwwroot/lib/editor/autoCloseTags.ts"),t=__webpack_require__("./wwwroot/lib/bootbox.js"),o=__webpack_require__.n(t),r=__webpack_require__("./wwwroot/lib/editor/mentions.ts");function n(e,t,o){if(void 0!==e.setSelectionRange)e.focus(),e.setSelectionRange(t,o);else if(e.createTextRange){const r=e.createTextRange();r.collapse(!0),r.moveEnd("character",o),r.moveStart("character",t),r.select()}}function a(e,t){e.setSelectionRange(t,t)}function i(e,t){if(void 0!==e.setSelectionRange){const o=e.selectionStart,r=e.selectionEnd;e.value=e.value.substring(0,o)+t+e.value.substring(r),o!==r?n(e,o,o+t.length):a(e,o+t.length)}else e.value+=t,e.focus()}function s(e,t,o){if(void 0!==e.setSelectionRange){const r=e.selectionStart,i=e.selectionEnd;e.value=e.value.substring(0,r)+t+e.value.substring(r,i)+o+e.value.substring(i),r!==i?n(e,r,t.length+o.length+i):a(e,r+t.length)}else e.value+=t,e.focus(),e.value+=o;e.dispatchEvent(new Event("change"))}function l(e){return void 0!==e.setSelectionRange&&e.selectionStart!==e.selectionEnd}(window||__webpack_require__.g).yafEditor=class{constructor(t,o,n,a,i,l,c,u,d){this.Name=t,this.InsertNote=u,this.TypeTitle=d,this.UrlTitle=o,this.UrlDescription=n,this.UrlImageTitle=a,this.UrlImageDescription=i,this.Description=l,this.MediaTitle=c,document.querySelectorAll(".BBCodeEditor").forEach((t=>{new e.default(t);var o={};o.id=t.id,o.lookup="user",o.url="/api/User/GetMentionUsers?users={q}",o.onclick=e=>{this.FormatText("userlink",e.name)},(0,r.default)(o),t.addEventListener("keydown",(e=>{var t,o;if(e.ctrlKey&&!e.altKey&&[66,73,85,81,13].includes(e.which)){const r=e.target;66===e.which?s(r,"[b]","[/b]"):73===e.which?s(r,"[i]","[/i]"):85===e.which?s(r,"[u]","[/u]"):81===e.which?s(r,"[quote]","[/quote]"):13===e.which&&(null!==document.getElementById("QuickReplyDialog")?null===(t=document.querySelector('[data-bs-save*="modal"]'))||void 0===t||t.click():null!==document.querySelector('[formaction*="PostReply"]')&&(null===(o=document.querySelector('[formaction*="PostReply"]'))||void 0===o||o.click()))}}))}))}FormatText(e,t){var r=document.getElementById(this.Name);switch(e){case"undo":document.execCommand("undo");break;case"redo":document.execCommand("redo");break;case"bold":s(r,"[b]","[/b]");break;case"italic":s(r,"[i]","[/i]");break;case"underline":s(r,"[u]","[/u]");break;case"strikethrough":s(r,"[s]","[/s]");break;case"highlight":s(r,"[h]","[/h]");break;case"code":s(r,"[code]","[/code]");break;case"codelang":s(r,`[code=${t}]`,"[/code]");break;case"media":l(r)?s(r,"[media]","[/media]"):o().prompt({title:this.MediaTitle,placeholder:"https://",callback:e=>{i(r,`[media]${e}[/media]`)}});break;case"img":l(r)?s(r,"[img]","[/img]"):o().confirm({title:this.UrlImageTitle,message:`<form><div class="mb-3">\n                                 <label for="url" class="form-label">${this.UrlImageTitle}</label> \n                                 <input type="text" class="form-control" id="url" placeholder="https://" />\n                             </div>\n                             <div class="mb-3">\n                                 <label for="desc" class="form-label">${this.UrlImageDescription}</label>\n                                 <input type="text" class="form-control" id="desc" placeholder="${this.Description}" />\n                             </div></form>\n                                 `,callback:e=>{if(e){const e=document.getElementById("url").value,t=document.getElementById("desc").value;i(r,""!==t&&null!==t?`[img=${e}]${t}[/img]`:`[img]${e}[/img]`)}}});break;case"quote":s(r,"[quote]","[/quote]");break;case"justifyleft":s(r,"[left]","[/left]");break;case"justifycenter":s(r,"[center]","[/center]");break;case"justifyright":s(r,"[right]","[/right]");break;case"indent":s(r,"[indent]","[/indent]");break;case"outdent":l(r)&&function(e,t,o){if(void 0!==e.setSelectionRange){const r=e.selectionStart,i=e.selectionEnd,s=e.value.substring(r,i);-1!==s.indexOf(t)&&-1!==s.indexOf(o)&&(e.value=e.value.substring(0,r)+e.value.substring(r+t.length,i-o.length)+e.value.substring(i),r!==i?n(e,r,i-o.length-t.length):a(e,r+t.length))}}(r,"[indent]","[/indent]");break;case"removeFormat":l(r)&&function(e){if(void 0!==e.setSelectionRange){const t=e.selectionStart,o=e.selectionEnd,r=e.value.substring(t,o),a=/\[.*?\]/g,i=r.replace(a,""),s=r.length-i.length;e.value=e.value.replace(r,i),n(e,t,o-s)}}(r);break;case"createNote":o().confirm({title:this.InsertNote,message:`<form><div class="mb-3">\n                                 <label for="type" class="form-label">${this.TypeTitle}</label> \n                                 <select class="form-select" id="type" aria-label="note type">\n                                     <option value="primary">primary</option>\n                                     <option value="secondary">secondary</option>\n                                     <option value="success">success</option>\n                                     <option value="danger">danger</option>\n                                     <option value="warning">warning</option>\n                                     <option value="info">info</option>\n                                     <option value="light">light</option>\n                                     <option value="dark">dark</option>\n                                 </select>\n                             </div>\n                             <div class="mb-3">\n                                 <label for="txt" class="form-label">${this.InsertNote}</label>\n                                 <textarea cols="20" rows="7" id="txt" class="form-control textarea-input"></textarea>\n                             </div></form>\n                                 `,callback:e=>{if(e){const e=document.getElementById("type").value,t=document.getElementById("txt").value;i(r,`[note=${e}]${t}[/note]`)}}});break;case"createlink":o().confirm({title:this.UrlTitle,message:`<form><div class="mb-3">\n                                 <label for="url" class="form-label">${this.UrlTitle}</label> \n                                 <input type="text" class="form-control" id="url" placeholder="https://" />\n                             </div>\n                             <div class="mb-3">\n                                 <label for="desc" class="form-label">${this.UrlDescription}</label>\n                                 <input type="text" class="form-control" id="desc" placeholder="${this.Description}" />\n                             </div></form>\n                                 `,callback(e){if(e){const e=document.getElementById("url").value,t=document.getElementById("desc").value;i(r,""!==t&&null!=t?`[url=${e}]${t}[/url]`:`[url]${e}[/url]`)}}});break;case"unorderedlist":s(r,"[list][*]","[/list]");break;case"orderedlist":s(r,"[list=1][*]","[/list]");break;case"color":s(r,`[color=${t}]`,"[/color]");break;case"font":s(r,`[font=${t}]`,"[/font]");break;case"fontsize":s(r,`[size=${t}]`,"[/size]");break;case"albumimg":i(r,`[albumimg]${t}[/albumimg]`);break;case"attach":i(r,`[attach]${t}[/attach]`);break;case"email":o().confirm({title:this.UrlTitle,message:`<form><div class="mb-3">\n                  <label for="url" class="form-label">${this.UrlTitle}</label> \n                  <input type="text" class="form-control" id="url" placeholder="https://" />\n              </div>\n              <div class="mb-3">\n                  <label for="desc" class="form-label">${this.UrlDescription}</label>\n                  <input type="text" class="form-control" id="desc" placeholder="${this.Description}" />\n              </div></form>\n                  `,callback(e){if(e){const e=document.getElementById("url").value,t=document.getElementById("desc").value;i(r,""!==t&&null!=t?`[email=${e}]${t}[/email]`:`[email]${e}[/email]`)}}});break;case"userlink":i(r,`[userlink]${t}[/userlink]`);break;case"selectAll":r.select();break;case"cut":l(r)&&document.execCommand("cut");break;case"copy":l(r)&&document.execCommand("copy");break;case"paste":navigator.clipboard.readText().then((e=>{r.value+=e}));break;default:s(r,`[${e}]`,`[/${e}]`)}}}})()})();
//# sourceMappingURL=editor.min.js.map