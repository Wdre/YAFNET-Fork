/*! Yet Another Forum.NET v4.0.0 | Â© Ingo Herbote | https://www.yetanotherforum.net/ */

(()=>{var e={"./wwwroot/lib/bootbox.js":function(e,t,o){var a,r,n;!function(){"use strict";r=[o("bootstrap")],a=function e(t,o){const a={},r="6.0.4";a.VERSION=r;const n={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"}},s={dialog:'<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="bootbox-body"></div></div></div></div></div>',header:'<div class="modal-header"><h5 class="modal-title"></h5></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="bootbox-close-button close btn-close" aria-hidden="true" aria-label="Close"></button>',form:'<form class="bootbox-form"></form>',button:'<button type="button" class="btn"></button>',option:'<option value=""></option>',promptMessage:'<div class="bootbox-prompt-message"></div>',inputs:{text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-select"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'}},i={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",value:"",inputType:"text",errorMessage:null,swapButtonOrder:!1,centerVertical:!1,multiple:!1,scrollable:!1,reusable:!1,relatedTarget:null,size:null,id:null};function l(e,...t){if(!e)return{};for(const o of t)if(o)for(const[t,a]of Object.entries(o))switch(Object.prototype.toString.call(a)){case"[object Object]":e[t]=e[t]||{},e[t]=l(e[t],a);break;case"[object Array]":e[t]=l(new Array(a.length),a);break;default:e[t]=a}return e}function c(e,t){const o=e.length;let a={};if(o<1||o>2)throw new Error("Invalid argument length");return 2===o||"string"==typeof e[0]?(a[t[0]]=e[0],a[t[1]]=e[1]):a=e[0],a}function d(e,t,o){return l({},e,c(t,o))}function u(e,t,o,a){let r;if(a&&a[0]){r=a[0].locale||i.locale;(a[0].swapButtonOrder||i.swapButtonOrder)&&(t=t.reverse())}return p(d({className:`bootbox-${e}`,buttons:b(t,r)},a,o),t)}function p(e,t){const a={};for(const[e,o]of Object.entries(t))a[o]=!0;for(const[r,n]of Object.entries(e.buttons))if(a[r]===o)throw new Error(`button key "${r}" is not allowed (options are ${t.join(" ")})`);return e}function b(e,t){const o={};for(let a=0,r=e.length;a<r;a++){const r=e[a],n=r.toLowerCase(),s=r.toUpperCase();o[n]={label:m(s,t)}}return o}function m(e,t){const o=n[t];return o?o[e]:n.en[e]}function f(e){let t,o;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error('"message" option must not be null or an empty string.');(e=Object.assign({},i,e)).backdrop?e.backdrop="string"!=typeof e.backdrop||"static"!==e.backdrop.toLowerCase()||"static":e.backdrop=!1!==e.backdrop&&0!==e.backdrop&&"static",e.buttons||(e.buttons={}),t=e.buttons,o=h(t);var a=0;for(var[r,n]of Object.entries(t)){if("function"==typeof n&&(n=t[r]={callback:n}),"object"!==Object.prototype.toString.call(n).replace(/^\[object (.+)\]$/,"$1").toLowerCase())throw new Error(`button with key "${r}" must be an object`);if(n.label||(n.label=r),!n.className){let t=!1;t=e.swapButtonOrder?0===a:a===o-1,n.className=o<=2&&t?"btn-primary":"btn-secondary btn-default"}a++}return e}function h(e){return Object.keys(e).length}function g(e){S(e.data.dialog.querySelector(".bootbox-accept").first(),"focus")}function y(e,t,o){e.stopPropagation(),e.preventDefault();!("function"==typeof o&&!1===o.call(t,e))&&t&&bootstrap.Modal.getInstance(t).hide()}function v(e,t,a){let r=!1,n=!0,s=!0;if("date"===e)t===o||(n=x(t))?a===o||(s=x(a))||console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.'):console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.');else if("time"===e){if(t!==o&&!(n=w(t)))throw new Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');if(a!==o&&!(s=w(a)))throw new Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}else{if(t!==o&&isNaN(t))throw n=!1,new Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.');if(a!==o&&isNaN(a))throw s=!1,new Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}if(n&&s){if(a<t)throw new Error('"max" must be greater than or equal to "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');r=!0}return r}function w(e){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(e)}function x(e){return/(\d{4})-(\d{2})-(\d{2})/.test(e)}function S(e,t){if("string"==typeof t&&"function"==typeof e[t])e[t]();else{const o="string"==typeof t?new Event(t,{bubbles:!0}):t;e.dispatchEvent(o)}}function E(e){const t=document.createElement("template");return t.innerHTML=e.trim(),t.content.children[0]}function k(e,t,o,a){if(a){const r=e=>{if(!e.target)return;const t=e.target.closest(a);t&&o.call(t,e)};return e.addEventListener(t,r),r}{const a=t=>{o.call(e,t)};return e.addEventListener(t,a),a}}return a.locales=function(e){return e?n[e]:n},a.addLocale=function(e,t){return["OK","CANCEL","CONFIRM"].forEach(((e,o)=>{if(!t[e])throw new Error(`Please supply a translation for "${e}"`)})),n[e]={OK:t.OK,CANCEL:t.CANCEL,CONFIRM:t.CONFIRM},a},a.removeLocale=function(e){if("en"===e)throw new Error('"en" is used as the default and fallback locale and cannot be removed.');return delete n[e],a},a.setLocale=function(e){return a.setDefaults("locale",e)},a.setDefaults=function(){let e={};return 2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],Object.assign(i,e),a},a.hideAll=function(){return document.querySelectorAll(".bootbox").forEach((e=>{bootstrap.Modal.getInstance(e).hide()})),a},a.init=function(o){return e(o||t)},a.dialog=function(e){if(bootstrap.Modal===o)throw new Error('"bootstrap.Modal" is not defined; please double check you have included the Bootstrap JavaScript library. See https://getbootstrap.com/docs/5.3/getting-started/introduction/ for more details.');if(e=f(e),bootstrap.Modal.VERSION){e.fullBootstrapVersion=bootstrap.Modal.VERSION;let t=e.fullBootstrapVersion.indexOf(".");e.bootstrap=e.fullBootstrapVersion.substring(0,t)}else e.bootstrap="2",e.fullBootstrapVersion="2.3.2",console.warn("Bootbox will *mostly* work with Bootstrap 2, but we do not officially support it. Please upgrade, if possible.");let t=E(s.dialog),a=t.querySelector(".modal-dialog"),r=t.querySelector(".modal-body"),n=E(s.header),i=E(s.footer),l=e.buttons,c={onEscape:e.onEscape};if("string"==typeof e.message?r.querySelector(".bootbox-body").innerHTML=e.message:r.querySelector(".bootbox-body").append(e.message),h(e.buttons)>0){for(const[e,t]of Object.entries(l)){let o=E(s.button);switch(o.dataset.bbHandler=e,t.className.split(" ").forEach((e=>{o.classList.add(e)})),e){case"ok":case"confirm":o.classList.add("bootbox-accept");break;case"cancel":o.classList.add("bootbox-cancel")}o.innerHTML=t.label,t.id&&o.setAttribute({id:t.id}),!0===t.disabled&&(o.disabled=!0),i.append(o),c[e]=t.callback}r.after(i)}if(!0===e.animate&&t.classList.add("fade"),e.className&&e.className.split(" ").forEach((e=>{t.classList.add(e)})),e.id&&t.setAttribute({id:e.id}),e.size)switch(e.fullBootstrapVersion.substring(0,3)<"3.1"&&console.warn(`"size" requires Bootstrap 3.1.0 or higher. You appear to be using ${e.fullBootstrapVersion}. Please upgrade to use this option.`),e.size){case"small":case"sm":a.classList.add("modal-sm");break;case"large":case"lg":a.classList.add("modal-lg");break;case"extra-large":case"xl":a.classList.add("modal-xl"),e.fullBootstrapVersion.substring(0,3)<"4.2"&&console.warn(`Using size "xl"/"extra-large" requires Bootstrap 4.2.0 or higher. You appear to be using ${e.fullBootstrapVersion}. Please upgrade to use this option.`)}if(e.scrollable&&(a.classList.add("modal-dialog-scrollable"),e.fullBootstrapVersion.substring(0,3)<"4.3"&&console.warn(`Using "scrollable" requires Bootstrap 4.3.0 or higher. You appear to be using ${e.fullBootstrapVersion}. Please upgrade to use this option.`)),e.title||e.closeButton){if(e.title?n.querySelector(".modal-title").innerHTML=e.title:n.classList.add("border-0"),e.closeButton){let t=E(s.closeButton);e.bootstrap<5&&(t.innerHTML="&#215;"),e.bootstrap<4?n.prepend(t):n.append(t)}r.before(n)}if(e.centerVertical&&(a.classList.add("modal-dialog-centered"),e.fullBootstrapVersion<"4.0.0"&&console.warn(`"centerVertical" requires Bootstrap 4.0.0-beta.3 or higher. You appear to be using ${e.fullBootstrapVersion}. Please upgrade to use this option.`)),e.reusable||(t.addEventListener("hide.bs.modal",(function(){t.removeEventListener("escape.close.bb",null),t.removeEventListener("click",null)}),{once:!0}),t.addEventListener("hidden.bs.modal",(function(){t.remove(),t=null}),{once:!0})),e.onHide){if("function"!=typeof e.onHide)throw new Error('Argument supplied to "onHide" must be a function');t.addEventListener("hide.bs.modal",e.onHide)}if(e.onHidden){if("function"!=typeof e.onHidden)throw new Error('Argument supplied to "onHidden" must be a function');t.addEventListener("hidden.bs.modal",e.onHidden)}if(e.onShow){if("function"!=typeof e.onShow)throw new Error('Argument supplied to "onShow" must be a function');k(t,"show.bs.modal",e.onShow)}if(t.addEventListener("shown.bs.modal",{dialog:t},g),e.onShown){if("function"!=typeof e.onShown)throw new Error('Argument supplied to "onShown" must be a function');k(t,"shown.bs.modal",e.onShown)}if(!0===e.backdrop){let e=!1;k(t,"mousedown",(function(t){t.stopPropagation(),e=!0})),k(t,"click.dismiss.bs.modal",(function(o){e||o.target!==o.currentTarget||S(t,"escape.close.bb")}))}t.addEventListener("escape.close.bb",(function(e){c.onEscape&&y(e,t,c.onEscape)})),t.addEventListener("click",(e=>{if("button"===e.target.nodeName.toLowerCase()&&!e.target.classList.contains("disabled")){const a=e.target.dataset.bbHandler;a!==o&&y(e,t,c[a])}})),document.addEventListener("click",(e=>{e.target.closest(".bootbox-close-button")&&y(e,t,c.onEscape)})),t.addEventListener("keyup",(function(e){27===e.which&&S(t,"escape.close.bb")})),"object"==typeof e.container?e.container.append(t):document.querySelector(e.container).append(t);const d=new bootstrap.Modal(t,{backdrop:e.backdrop,keyboard:!1,show:!1});return e.show&&d.show(e.relatedTarget),t},a.alert=function(){let e;if(e=u("alert",["ok"],["message","callback"],arguments),e.callback&&"function"!=typeof e.callback)throw new Error('alert requires the "callback" property to be a function when provided');return e.buttons.ok.callback=e.onEscape=function(){return"function"!=typeof e.callback||e.callback.call(this)},a.dialog(e)},a.confirm=function(){let e;if(e=u("confirm",["cancel","confirm"],["message","callback"],arguments),"function"!=typeof e.callback)throw new Error("confirm requires a callback");return e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},a.dialog(e)},a.prompt=function(){let e,t,r,n,l,c;if(r=E(s.form),e=u("prompt",["cancel","confirm"],["title","callback"],arguments),e.value||(e.value=i.value),e.inputType||(e.inputType=i.inputType),l=e.show===o?i.show:e.show,e.show=!1,e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)},e.buttons.confirm.callback=function(){let t;if("checkbox"===e.inputType){const o=Array.from(n.querySelectorAll('input[type="checkbox"]:checked'));if(t=Array.from(o).map((function(e){return e.value})),!0===e.required&&0===o.length)return!1}else t="radio"===e.inputType?n.querySelector('input[type="radio"]:checked').value:n.value;return e.callback.call(this,t)},!e.title)throw new Error("prompt requires a title");if("function"!=typeof e.callback)throw new Error("prompt requires a callback");if(!s.inputs[e.inputType])throw new Error("Invalid prompt type");switch(n=E(s.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"password":n.value=e.value,e.placeholder&&n.setAttribute("placeholder",e.placeholder),e.pattern&&n.setAttribute("pattern",e.pattern),e.maxlength&&n.setAttribute("maxlength",e.maxlength),e.required&&(n.required=!0),e.rows&&!isNaN(parseInt(e.rows))&&"textarea"===e.inputType&&n.setAttribute("rows",e.rows);break;case"date":case"time":case"number":case"range":if(n.value=e.value,e.placeholder&&n.setAttribute("placeholder",e.placeholder),e.pattern?n.setAttribute("pattern",e.pattern):"date"===e.inputType?n.setAttribute("pattern","d{4}-d{2}-d{2}"):"time"===e.inputType&&n.setAttribute("pattern","d{2}:d{2}"),e.required&&(n.required=!0),e.step){if(!("any"===e.step||!isNaN(e.step)&&parseFloat(e.step)>0))throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');n.setAttribute("step",e.step)}v(e.inputType,e.min,e.max)&&(e.min!==o&&n.setAttribute("min",e.min),e.max!==o&&n.setAttribute("max",e.max));break;case"select":var d={};if(c=e.inputOptions||[],!Array.isArray(c))throw new Error("Please pass an array of input options");if(!c.length)throw new Error('prompt with "inputType" set to "select" requires at least one option');e.required&&(n.required=!0),e.multiple&&(n.multiple=!0);for(const[,e]of Object.entries(c)){let t=n;if(e.value===o||e.text===o)throw new Error('each option needs a "value" property and a "text" property');if(e.group){if(!d[e.group]){var p=E("<optgroup />");p.setAttribute("label",e.group),d[e.group]=p}t=d[e.group]}let a=E(s.option);a.setAttribute("value",e.value),a.textContent=e.text,t.append(a)}for(const[e,t]of Object.entries(d))n.append(t);n.value=e.value,e.bootstrap<5&&(n.classList.remove("form-select"),n.classList.add("form-control"));break;case"checkbox":var b=Array.isArray(e.value)?e.value:[e.value];if(c=e.inputOptions||[],!c.length)throw new Error('prompt with "inputType" set to "checkbox" requires at least one option');n=E('<div class="bootbox-checkbox-list"></div>');for(const[t,a]of Object.entries(c)){if(a.value===o||a.text===o)throw new Error('each option needs a "value" property and a "text" property');let t=E(s.inputs[e.inputType]);t.querySelector("input").setAttribute("value",a.value),t.querySelector("label").append(`\n${a.text}`);for(const[e,o]of Object.entries(b))o===a.value&&(t.querySelector("input").checked=!0);n.append(t)}break;case"radio":if(e.value!==o&&Array.isArray(e.value))throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');if(c=e.inputOptions||[],!c.length)throw new Error('prompt with "inputType" set to "radio" requires at least one option');n=E('<div class="bootbox-radiobutton-list"></div>');var m=!0;for(const[t,a]of Object.entries(c)){if(a.value===o||a.text===o)throw new Error('each option needs a "value" property and a "text" property');let t=E(s.inputs[e.inputType]);t.querySelector("input").setAttribute("value",a.value),t.querySelector("label").append(`\n${a.text}`),e.value!==o&&a.value===e.value&&(t.querySelector("input").checked=!0,m=!1),n.append(t)}m&&n.querySelector('input[type="radio"]').setAttribute("checked",!0)}if(r.append(n),r.addEventListener("submit",(function(e){e.preventDefault(),e.stopPropagation(),t.querySelector(".bootbox-accept").click()})),e.message&&""!==e.message.trim()){let t=E(s.promptMessage).innerHTML=e.message;r.prepend(t),e.message=r}else e.message=r;t=a.dialog(e),t.removeEventListener("shown.bs.modal",g),t.addEventListener("shown.bs.modal",(function(){n.focus()}));const f=new bootstrap.Modal(t);return!0===l&&f.show(),t},a},void 0===(n="function"==typeof a?a.apply(t,r):a)||(e.exports=n)}()},"./wwwroot/lib/forum/utilities.ts":(e,t,o)=>{"use strict";o.r(t),o.d(t,{bootboxConfirm:()=>f,bootboxShareTopic:()=>h,copyToClipBoard:()=>g,createForumSelectTemplates:()=>i,createTagsSelectTemplates:()=>s,empty:()=>u,errorLog:()=>d,loadChoiceOptions:()=>c,loadForumChoiceOptions:()=>l,renderAttachPreview:()=>b,togglePassword:()=>m,wrap:()=>p});var a=o("bootstrap"),r=o("./wwwroot/lib/bootbox.js"),n=o.n(r);function s(e){const t=this.config.removeItemButton;return{item({classNames:o},a){let r=a.label;if(a.customProperties){let e;try{e=JSON.parse(a.customProperties)}catch(t){e=a.customProperties}r=void 0===e.label?a.label:e.label}return e(`\n                     <div class="${String(o.item)} ${String(a.highlighted?o.highlightedState:o.itemSelectable)} badge text-bg-primary fs-6 m-1"\n                          data-item data-id="${String(a.id)}" data-value="${String(a.value)}"\n                          ${String(t?"data-deletable":"")}\n                          ${String(a.active?'aria-selected="true"':"")} ${String(a.disabled?'aria-disabled="true"':"")}>\n                        <i class="fas fa-fw fa-tag align-middle me-1"></i>${String(r)}\n                        ${String(t?`<button type="button" class="${String(o.button)}" aria-label="Remove item: '${String(a.value)}'" data-button="">Remove item</button>`:"")}\n                     </div>\n                    `)}}}function i(e){const t=this.config.itemSelectText;return{item:({classNames:t},o)=>e(`\n                                 <div class="${String(t.item)} ${String(o.highlighted?t.highlightedState:t.itemSelectable)} ${String(o.placeholder?t.placeholder:"")}"\n                                      data-item data-id="${String(o.id)}" data-value="${String(o.value)}"\n                                      ${String(o.active?'aria-selected="true"':"")} ${String(o.disabled?'aria-disabled="true"':"")}>\n                                    <span><i class="fas fa-fw fa-comments text-secondary me-1"></i>${String(o.label)}</span>\n                                 </div>\n                                `),choice:({classNames:o},a)=>e(`\n                                 <div class="${String(o.item)} ${String(o.itemChoice)} ${String(a.disabled?o.itemDisabled:o.itemSelectable)}"\n                                      data-select-text="${String(t)}" data-choice ${String(a.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable")}\n                                      data-id="${String(a.id)}" data-value="${String(a.value)}"\n                                      ${String(a.groupId>0?'role="treeitem"':'role="option"')}>\n                                      <span><i class="fas fa-comments fa-fw text-secondary me-1"></i>${String(a.label)}</span>\n                                 </div>\n                                 `),choiceGroup:({classNames:o},a)=>e(`\n                     <div class="${String(o.item)} fw-bold text-secondary"\n                          data-select-text="${String(t)}" data-choice ${String(a.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable")}\n                          data-id="${String(a.id)}" data-value="${String(a.value)}"\n                          ${String(a.groupId>0?'role="treeitem"':'role="option"')}>\n                          <span><i class="fas fa-fw fa-folder text-warning me-1"></i>${String(a.label)}</span>\n                     </div>\n                     `)}}function l(e,t,o){return fetch(t,{method:"POST",body:JSON.stringify(e),headers:{RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value,Accept:"application/json","Content-Type":"application/json;charset=utf-8"}}).then((e=>e.json())).then((t=>t.results.map((a=>({value:a.id,label:a.text,choices:a.children.map((a=>{const r=parseInt(o);return{value:a.id,label:a.text,selected:r>0&&o==a.id,customProperties:{page:e.Page,total:t.total,url:a.url}}}))})))))}function c(e,t){return fetch(t,{method:"POST",body:JSON.stringify(e),headers:{RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value,Accept:"application/json","Content-Type":"application/json;charset=utf-8"}}).then((e=>e.json())).then((t=>t.results.map((o=>({value:o.id,label:o.text,customProperties:{page:e.Page,total:t.total}})))))}function d(e){console.error("An Error has occurred!",e)}function u(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function p(e,t){var o;null===(o=e.parentNode)||void 0===o||o.insertBefore(t,e),t.appendChild(e)}function b(e){document.querySelectorAll(e).forEach((e=>new a.Popover(e,{html:!0,trigger:"hover",placement:"bottom",content:()=>`<img src="${e.src}" class="img-fluid" />`})))}function m(){const e=document.getElementById("PasswordToggle");if(e&&document.body.contains(e)){const t=e.querySelector("i"),o=document.querySelector("input[id*='Password']");e.addEventListener("click",(e=>{e.preventDefault(),"text"===o.getAttribute("type")?(o.setAttribute("type","password"),t.classList.add("fa-eye-slash"),t.classList.remove("fa-eye")):"password"===o.getAttribute("type")&&(o.setAttribute("type","text"),t.classList.remove("fa-eye-slash"),t.classList.add("fa-eye"))}))}}function f(e,t,o,a,r,s){const i={message:o,centerVertical:!0,title:t};i.buttons={cancel:{label:`<i class="fa fa-times"></i> ${r}`,className:"btn-danger",callback(o){s(!1),e.innerHTML=t}},main:{label:`<i class="fa fa-check"></i> ${a}`,className:"btn-success",callback(e){s(!0)}}},n().dialog(i)}function h(e,t,o,a,r){const s={message:t,centerVertical:!0,title:e,value:r};s.buttons={cancel:{label:o},confirm:{label:a}},s.callback=()=>{g(r)},n().prompt(s)}function g(e){navigator.clipboard.writeText(e)}document.addEventListener("click",(e=>{const t=e.target;if(t.parentElement&&t.parentElement.matches('[data-bs-toggle="confirm"]')){e.preventDefault();const o=t.parentElement,a=o.dataset.title||"",r=o.dataset.yes||"",n=o.dataset.no||"",s=o.innerHTML;o.innerHTML="<span class='spinner-border spinner-border-sm' role='status' aria-hidden='true'></span> Loading...",f(o,s,a,r,n,(e=>{e&&o.click()}))}}),!1);const y=window||o.g;y.createTagsSelectTemplates=s,y.createForumSelectTemplates=i,y.loadForumChoiceOptions=l,y.loadChoiceOptions=c,y.errorLog=d,y.bootboxShareTopic=h,y.togglePassword=m,y.copyToClipBoard=g},bootstrap:e=>{"use strict";e.exports=bootstrap}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{"use strict";o.r(a);var e=o("./wwwroot/lib/forum/utilities.ts"),t=o("bootstrap");function r(o){const a=document.querySelector(".searchInput").value,r=document.querySelector(".searchUserInput").value,n=document.querySelector(".searchTagInput").value,s=document.getElementById("SearchResultsPlaceholder"),i=new t.Modal("#loadModal"),l="True"===document.querySelector(".searchUserInput").dataset.display,c=parseInt(document.querySelector(".resultsPage").value),d=document.querySelector(".titleOnly").value,u=document.querySelector(".searchWhat").value,p=s.dataset.minimum,b=""===document.getElementById("Input_ForumListSelected").value?0:parseInt(document.getElementById("Input_ForumListSelected").value);let m="";if(a.length&&a.length>=parseInt(p)||r.length&&r.length>=parseInt(p)||n.length&&n.length>=parseInt(p)){let t;if(a.length&&a.length>=parseInt(p)&&("1"===d?"0"===u?(t=a,m+=` Topic: (${t.replace(/(^|\s+)/g,"$1+")})`):"1"===u?m+=` Topic: ${a}`:"2"===u&&(m+=` Topic:"${a}"`):"0"===u?(t=a,m+=`(${t.replace(/(^|\s+)/g,"$1+")})`):"1"===u?m+=`${a}`:"2"===u&&(m+=`"${a}"`)),r.length&&r.length>=parseInt(p)){const e=l?"AuthorDisplay":"Author";m.length&&(m+=" "),a.length?m+=`AND ${e}:${r}`:m=`+${e}:${r}`}n.length&&n.length>=parseInt(p)&&(m.length&&(m+=" "),a.length?m+=`AND TopicTags:${n}`:m=`+TopicTags:${n}`);const f={ForumId:b,PageSize:c,Page:o,SearchTerm:m};e.empty(s),i.show(),fetch("/api/Search/GetSearchResults",{method:"POST",body:JSON.stringify(f),headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8",RequestVerificationToken:document.querySelector('input[name="__RequestVerificationToken"]').value}}).then((e=>e.json())).then((t=>{var a;null===(a=document.getElementById("loadModal"))||void 0===a||a.addEventListener("shown.bs.modal",(()=>{i.hide()}));const r=s.dataset.posted||"",n=s.dataset.by||"",d=s.dataset.lastpost||"",u=s.dataset.topic||"";if(0===t.searchResults.length){i.hide();const t=s.dataset.notext||"",o=document.createElement("div");o.innerHTML=`<div class="alert alert-warning text-center mt-3" role="alert">${t}</div>`,s.appendChild(o),e.empty(document.getElementById("SearchResultsPagerTop")),e.empty(document.getElementById("SearchResultsPagerBottom"))}else i.hide(),t.searchResults.forEach((e=>{const t=document.createElement("div");let o=" ";if(e.topicTags){e.topicTags.split(",").forEach((e=>{o+=`<span class='badge text-bg-secondary me-1'><i class='fas fa-tag me-1'></i>${e}</span>`}))}t.innerHTML=`\n                <div class="row">\n                    <div class="col">\n                        <div class="card border-0 w-100 mb-3">\n                            <div class="card-header bg-transparent border-top border-bottom-0 px-0 pb-0 pt-4 topicTitle">\n                                <h5>\n                                    <a title="${u}" href="${e.topicUrl}">${e.topic}</a>&nbsp;\n                                    <a title="${d}" href="${e.messageUrl}"><i class="fas fa-external-link-alt"></i></a>\n                                    <small class="text-body-secondary">(<a href="${e.forumUrl}">${e.forumName}</a>)</small>\n                                </h5>\n                            </div>\n                            <div class="card-body px-0">\n                                <h6 class="card-subtitle mb-2 text-body-secondary">${e.description}</h6>\n                                <p class="card-text messageContent">${e.message}</p>\n                            </div>\n                            <div class="card-footer bg-transparent border-top-0 px-0 py-2">\n                                <small class="text-body-secondary">\n                                    <span class="fa-stack">\n                                        <i class="fa fa-calendar-day fa-stack-1x text-secondary"></i>\n                                        <i class="fa fa-clock fa-badge text-secondary"></i>\n                                    </span>\n                                    ${r} ${e.posted} <i class="fa fa-user fa-fw text-secondary"></i>${n} ${l?e.userDisplayName:e.userName}${o}\n                                </small>\n                            </div>\n                        </div>\n                    </div>\n                </div>`,s.appendChild(t)})),function(t,o,a){const r=Math.ceil(a/t),n=document.getElementById("SearchResultsPagerTop"),s=document.getElementById("SearchResultsPagerBottom"),i=document.createElement("ul"),l=document.createElement("nav"),c=document.createElement("nav");if(l.setAttribute("aria-label","Search Page Results"),c.setAttribute("aria-label","Search Page Results"),i.classList.add("pagination"),e.empty(n),e.empty(s),o>0){const e=document.createElement("li");e.classList.add("page-item"),e.innerHTML=`<a href="javascript:getSearchResultsData(${o-1})" class="page-link"><i class="fas fas fa-angle-left" aria-hidden="true"></i></a>`,i.appendChild(e)}let d=o-2,u=o+3;if(d<0&&(d=0),u>r&&(u=r),d>0){let e=document.createElement("li");e.classList.add("page-item"),e.innerHTML='<a href="javascript:getSearchResultsData(0);" class="page-link">1</a>',i.appendChild(e),e=document.createElement("li"),e.classList.add("page-item"),e.classList.add("disabled"),e.innerHTML='<a class="page-link" href="#" tabindex="-1">...</a>',i.appendChild(e)}for(let e=d;e<u;e++)if(e===o){const t=document.createElement("li");t.classList.add("page-item"),t.classList.add("active"),t.innerHTML=`<span class="page-link">${e+1}</span>`,i.appendChild(t)}else{const t=document.createElement("li");t.classList.add("page-item"),t.innerHTML=`<a href="javascript:getSearchResultsData(${e});" class="page-link">${e+1}</a>`,i.appendChild(t)}if(u<r){let e=document.createElement("li");e.classList.add("page-item"),e.classList.add("disabled"),e.innerHTML='<a class="page-link" href="#" tabindex="-1">...</a>',i.appendChild(e),e=document.createElement("li"),e.classList.add("page-item"),e.innerHTML=`<a href="javascript:getSearchResultsData(${r-1})" class="page-link">${r}</a>`,i.appendChild(e)}if(o<r-1){const e=document.createElement("li");e.classList.add("page-item"),e.innerHTML=`<a href="javascript:getSearchResultsData(${o+1})" class="page-link"><i class="fas fas fa-angle-right" aria-hidden="true"></i></a>`,i.appendChild(e)}l.appendChild(i),c.innerHTML=l.innerHTML,n&&n.appendChild(l),s&&s.appendChild(c)}(c,o,t.totalRecords)})).catch((e=>{console.log(e),document.getElementById("SearchResultsPlaceholder").style.display="none",s.textContent=e}))}}document.querySelector(".searchInput").addEventListener("keypress",(e=>{if(13===e.which){e.preventDefault();r(0)}})),document.addEventListener("DOMContentLoaded",(()=>{var e=new URL(window.location.href);(e.searchParams.has("search")||e.searchParams.has("forum")||e.searchParams.has("postedBy")||e.searchParams.has("tag"))&&r(0)}))})()})();
//# sourceMappingURL=search.min.js.map